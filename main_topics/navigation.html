<!DOCTYPE HTML>
<title>Hochschule Karlsruhe - Mechatronik</title>
<html>
	<!-- ######################### HEAD ######################### -->
	<head>
	
	
		<meta name="Content-Type" content="text/html"; charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
		
		<!-- Einbindung der Stylesheets -->
		<link rel="stylesheet" type="text/css" href="../styles/jquery.mobile.structure-1.3.2.min.css" />
		<link rel="stylesheet" type="text/css" href="../styles/themes/20130807_MT_Theme.min.css" />
		<!-- Eigene CSS für die Navigation -->
		<link rel="stylesheet" href="../styles/navigation.css"  type="text/css" />


		
		<!-- Einbindung von jQuery -->
		<script type="text/javascript" src="../js/jquery-1.10.1.min.js"></script>

		<!-- Einbindung von Phonegap und Barcode-Scanner Plugin -->		
		<script type="text/javascript" src="../phonegap.js"></script>
		<script type="text/javascript" src="../barcodescanner.js"></script>

		
		
		<!-- jQuery mobile GOOGLE MAPS Plugin -->		

		
				
		<!-- GoogleMaps API -->
		<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
		<script type="text/javascript" src="../js/qrcode_scannner.js"></script>
		<script type="text/javascript">
			// Wait for device API libraries to load
			//
			document.addEventListener("deviceready", onDeviceReady, false);

			// device APIs are available
			//
			function onDeviceReady() {
				navigator.geolocation.getCurrentPosition(onSuccess, onError);
			}

			
			// onSuccess Geolocation
			//
			function onSuccess(position) {
				var element = document.getElementById('geolocation');
				element.innerHTML = 'Latitude: '           + position.coords.latitude              + '<br />' +
									'Longitude: '          + position.coords.longitude             + '<br />' +
									'Altitude: '           + position.coords.altitude              + '<br />' +
									'Accuracy: '           + position.coords.accuracy              + '<br />' +
									'Altitude Accuracy: '  + position.coords.altitudeAccuracy      + '<br />' +
									'Heading: '            + position.coords.heading               + '<br />' +
									'Speed: '              + position.coords.speed                 + '<br />' +
									'Timestamp: '          + position.timestamp                    + '<br />';
									
									
				meineLongitude = position.coords.longitude;
				meineLatitude = position.coords.latitude;
				var Latlng_position = new google.maps.LatLng(meineLatitude, meineLongitude); // Schreibt aktuelle Position in Koordinaten-Variable für die aktuellen Position
				
				var mapOptions = {													// Definition der Anzeige-Optionen der Google-Maps karte
						zoom: 17,													// Zoom-Stufe der Karte
						center: Latlng_position,									// Definition des Mittelspunktes nach dem die Karte ausgerichtet wird
						mapTypeId: google.maps.MapTypeId.ROADMAP,					// Definiert den Anzeige-Typ der Goole Maps Karte
						panControl: false,											// panControl-Button wird deaktiviert
						zoomControl: false,											// ZoomControl-Button wird aktiviert
						mapTypeControl: false,										// Auswahlmöglichkeit für Kartentyp wird deaktiviert
						scaleControl: false,										// scaleControl wird aktiviert
						streetViewControl: false,									// StreetViewControl-Button wird deaktiviert
				};
				
				create_map(mapOptions);
				set_position(Latlng_position, map);
				set_markers(map);
			}

		
			// onError Callback creates the Google Map only with the HsKA building markers
			//
			function onError(error) {
				window.alert('Deine Position konnte nicht ermittelt werden! :-(');
				var Latlng_center = new google.maps.LatLng(49.013625,8.390161);	// Erstellt Variable mit der Position nach der die Karte zentriert werden soll
				var mapOptions = {												// Definition der Anzeige-Optionen der Google-Maps karte
					zoom: 15,													// Zoom-Stufe der Karte
					center: Latlng_center,										// Definition des Mittelspunktes nach dem die Karte ausgerichtet wird
					mapTypeId: google.maps.MapTypeId.ROADMAP,					// Definiert den Anzeige-Typ der Goole Maps Karte
					panControl: false,											// panControl-Button wird deaktiviert
					zoomControl: false,											// ZoomControl-Button wird aktiviert
					mapTypeControl: false,										// Auswahlmöglichkeit für Kartentyp wird deaktiviert
					scaleControl: false,										// scaleControl wird aktiviert
					streetViewControl: false,									// StreetViewControl-Button wird deaktiviert
				};
				// Google Map erzeugen
				create_map(mapOptions);
				set_markers(map); 
			}
  
  		
			// Create the Google Map with the delivered mapOptions in the div-Objekt "map-canvas"
			//
			function create_map(options){
				map = new google.maps.Map(document.getElementById('map-canvas'), options);
			}

			
  			// Set the marker at the position of the user in the Google Map 
			//
			function set_position(myPosition, map){
				// Marker für aktuellen Standort einfügen
				var marker = new google.maps.Marker({
					position: myPosition,
					map: map,
					title: 'Mein Standort',
					icon: '../bilder/position.png'
				});
				alert('marker my position success');
			}
			
			
  			// Set the marker at the position of the user in the Google Map 
			//
			function set_markers(map){
				// Auslesen der JSON-Datei und zeichnen von Google-Maps-Markern
				$.getJSON('../daten/gebaeude.json', function(json) {
					$.each(json, function(bau,data) {
						var latLng = new google.maps.LatLng(data.position.latitude, data.position.longitude); 
						// Creating a marker and putting it on the map
						var marker = new google.maps.Marker({
							position: latLng,
							map: map,
							title: data.name,
							icon: '../bilder/' + bau + '.png'
						});
					});
				});
				alert('marker buildings success');
			}				
</script>




		<!-- Einbindung von jQuery mobile -->
		<script type="text/javascript" src="../js/jquery.mobile-1.3.2.min.js"></script>

	</head>

	<!-- ######################### BODY ######################### -->
	<body>
		<div data-role="page"  id="p1"  data-theme="a">
		
			<div data-role="panel" data-theme="a" id="SidePanelp1" data-position="right" data-position-fixed="true" data-display="overlay">
				<h3>Menü</h3>
				<a data-role="button" data-theme="a" data-icon="info"   data-transition="flip" href="#Impressum">Impressum</a>
				<a data-role="button" data-theme="a" data-icon="home" data-transition="flip" href="../index.html" rel="external">Hauptmenü</a>
				<a data-role="button" data-theme="a" data-icon="search" data-transition="flip" href="navigation.html" rel="external">Navigator</a>
				<a data-role="button" data-theme="a" data-icon="delete" onClick="navigator.app.exitApp();">MT-App Beenden</a>
				<a data-role="button" data-theme="a" data-icon="back"   data-rel="close">Menü Schließen</a>
			</div>
				
			<!-- ######################### HEADER ######################### -->
			<div data-role="header" data-position="fixed">
				<a data-role="button" data-icon="home" data-iconpos="notext" data-transition="slide" data-direction="reverse" rel="external" href="../index.html#Main">Zurück</a>
				<h1>Navigator</h1>
				<a data-role="button" data-icon="grid" data-iconpos="notext" data-transition="slide" data-direction="reverse" rel="external" href="#SidePanelp1">Menü</a>
			</div>
			
			<!-- ######################### Content ######################### -->
			<div data-role="content">
				<div id="map-canvas" style="position:absolute; width: 100%;height: 100%"> <!-- hier wird die Karte angezeigt --></div>
			</div>
			
			<!-- ######################### FOOTER ######################### -->
			<div data-role="footer" data-position="fixed">
				<div data-role="navbar">
					<ul>
						<li><a href="#p1" data-icon="arrow-u" data-iconpos="top" data-transition="none" class="ui-btn-active ui-state-persist">Karte</a></li>
						<li><a href="#p2" data-icon="arrow-u" data-iconpos="top" data-transition="none">QR-Code</a></li>
						<li><a href="#p3" data-icon="arrow-u" data-iconpos="top" data-transition="none">Gebäudeplan</a></li>
					</ul>
				</div><!-- /navbar -->
			</div><!-- /footer -->
			

			
		</div>
		
		
		<div data-role="page"   id="p2" data-theme="a">
		
			<div data-role="panel" data-theme="a" id="SidePanelp2" data-position="right" data-position-fixed="true" data-display="overlay">
				<h3>Menü</h3>
				<a data-role="button" data-theme="a" data-icon="info"   data-transition="flip" href="#Impressum">Impressum</a>
				<a data-role="button" data-theme="a" data-icon="home" data-transition="flip" href="../index.html" rel="external">Hauptmenü</a>
				<a data-role="button" data-theme="a" data-icon="search" data-transition="flip" href="navigation.html" rel="external">Navigator</a>
				<a data-role="button" data-theme="a" data-icon="delete" onClick="navigator.app.exitApp();">MT-App Beenden</a>
				<a data-role="button" data-theme="a" data-icon="back"   data-rel="close">Menü Schließen</a>
			</div>
		
			<!-- ######################### HEADER ######################### -->
			<div data-role="header" data-position="fixed">
				<a data-role="button" data-icon="home" data-iconpos="notext" data-transition="slide" data-direction="reverse" rel="external" href="../index.html#Main">Zurück</a>
				<h1>Navigator</h1>
				<a data-role="button" data-icon="grid" data-iconpos="notext" data-transition="slide" data-direction="reverse" rel="external" href="#SidePanelp2">Menü</a>
			</div>
			
			<!-- ######################### Content ######################### -->
			<div data-role="content">
				<p>Du weißt nicht wo du gerade bist? Dann scanne einen QR-Code in deiner Nähe. Er wird die weiterhelfen...</p>
				
				<p><button id="scan" data-icon="search" data-iconpos="top">SCAN</button> </p>
				
				<div id="geolocation">Finding geolocation...</div>
			</div>
			
			<!-- ######################### FOOTER ######################### -->
			<div data-role="footer" data-position="fixed">
				<div data-role="navbar">
					<ul>
						<li><a href="#p1" data-icon="arrow-u" data-iconpos="top" data-transition="none">Karte</a></li>
						<li><a href="#p2" data-icon="arrow-u" data-iconpos="top" data-transition="none" class="ui-btn-active ui-state-persist">QR-Code</a></li>
						<li><a href="#p3" data-icon="arrow-u" data-iconpos="top" data-transition="none">Gebäudeplan</a></li>
					</ul>
				</div><!-- /navbar -->
			</div><!-- /footer -->
		</div>
		
		
		<div data-role="page" id="p3"  data-theme="a">
		
			<div data-role="panel" data-theme="a" id="SidePanelp3" data-position="right" data-position-fixed="true" data-display="overlay">
				<h3>Menü</h3>
				<a data-role="button" data-theme="a" data-icon="info"   data-transition="flip" href="#Impressum">Impressum</a>
				<a data-role="button" data-theme="a" data-icon="home" data-transition="flip" href="../index.html" rel="external">Hauptmenü</a>
				<a data-role="button" data-theme="a" data-icon="search" data-transition="flip" href="navigation.html" rel="external">Navigator</a>
				<a data-role="button" data-theme="a" data-icon="delete" onClick="navigator.app.exitApp();">MT-App Beenden</a>
				<a data-role="button" data-theme="a" data-icon="back"   data-rel="close">Menü Schließen</a>
			</div>
		
			<!-- ######################### HEADER ######################### -->
			<div data-role="header" data-position="fixed">
				<a data-role="button" data-icon="home" data-iconpos="notext" data-transition="slide" data-direction="reverse" rel="external" href="../index.html#Main">Zurück</a>
				<h1>Navigator</h1>
				<a data-role="button" data-icon="grid" data-iconpos="notext" data-transition="slide" data-direction="reverse" rel="external" href="#SidePanelp3">Menü</a>
			</div>
			
			<!-- ######################### Content ######################### -->
			<div data-role="content">

				
				<ul data-role="listview" data-inset="true" data-divider-theme="a">
					<li data-role="list-divider">Gebäude F</li>
					<li data-icon="false"><a href="#popup_og3" data-rel="popup" data-position-to="window" data-transition="slideup">3. OG</a></li>
					<li data-icon="false"><a href="#popup_og2" data-rel="popup" data-position-to="window" data-transition="slideup">2.OG</a></li>
					<li data-icon="false"><a href="#popup_og1" data-rel="popup" data-position-to="window" data-transition="slideup">1.OG</a></li>
					<li data-icon="false"><a href="#popup_eg" data-rel="popup" data-position-to="window" data-transition="slideup">EG</a></li>
					<li data-icon="false"><a href="#popup_kg" data-rel="popup" data-position-to="window" data-transition="slideup">KG</a></li>
				</ul>
					
										
				<div data-role="popup" id="popup_og3" data-overlay-theme="a" data-theme="a" data-corners="false">
					<a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
					<img class="popphoto" src="../bilder/OG3.png" style="max-height:90%;" alt="Gebäude F, 3.OG">
				</div>
				
				<div data-role="popup" id="popup_og2" data-overlay-theme="a" data-theme="a" data-corners="false">
					<a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
					<img class="popphoto" src="../bilder/OG2.png" style="max-height:90%;" alt="Gebäude F, 2.OG">
				</div>
				
				<div data-role="popup" id="popup_og1" data-overlay-theme="a" data-theme="a" data-corners="false">
					<a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
					<img class="popphoto" src="../bilder/OG1.png" style="max-height:90%;" alt="Gebäude F, 1.OG">
				</div>
				
				<div data-role="popup" id="popup_eg" data-overlay-theme="a" data-theme="a" data-corners="false">
					<a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
					<img class="popphoto" src="../bilder/EG.png" style="max-height:90%;" alt="Gebäude F, EG">
				</div>
				
				<div data-role="popup" id="popup_kg" data-overlay-theme="a" data-theme="a" data-corners="false">
					<a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
					<img class="popphoto" src="../bilder/KG.png" style="max-height:90;" alt="Gebäude F, KG">
				</div>
				
			</div>
			
			<!-- ######################### FOOTER ######################### -->
			<div data-role="footer" data-position="fixed">
				<div data-role="navbar">
					<ul>
						<li><a href="#p1" data-icon="arrow-u" data-iconpos="top" data-transition="none">Karte</a></li>
						<li><a href="#p2" data-icon="arrow-u" data-iconpos="top" data-transition="none">QR-Code</a></li>
						<li><a href="#p3" data-icon="arrow-u" data-iconpos="top" data-transition="none" class="ui-btn-active ui-state-persist">Gebäudeplan</a></li>
					</ul>
				</div><!-- /navbar -->
			</div><!-- /footer -->
		</div>
		
		
		
	
	
		
	</body>
</html>

