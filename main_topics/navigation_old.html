<!DOCTYPE html>
<title>Hochschule Karlsruhe - Mechatronik</title>
<html>

	<!-- ######################### HEAD ######################### -->
	<head>
		<meta name="Content-Type" content="text/html"; charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
		
		<!-- jQuery mobile CSS -->		
<!-- 		<link rel="stylesheet" href="../styles/jquery.mobile-1.3.2.css" type="text/css" /> -->
		
		<!-- Eigene CSS allgemein für alle Subtopics -->
		<link rel="stylesheet" href="../styles/main_topics_styles.css"  type="text/css" />
		
		<!-- Eigene CSS für die Navigation -->
		<link rel="stylesheet" href="../styles/navigation.css"  type="text/css" />
		
		<!-- Eigene CSS für die Toolbar -->
		<link rel="stylesheet" href="../styles/toolbar.css" type="text/css" />
		
		<!-- Eigene JavaScript für ??? -->				
		<script type="text/javascript" src="../js/showHideLayer.js"></script>
		
		<!-- jQuery -->
		<script type="text/javascript" src="../js/jquery-1.10.1.min.js"></script>
		
		<!-- GoogleMaps API -->		
		<script src="http://maps.googleapis.com/maps/api/js?sensor=true"></script>	
		
		<!-- Eigene Java-Script Funktionen -->	
		<script>
			// jQuery
			$(document).ready(function(){
 			 $(function(){	
			 			 
			 // Erfassen der aktuellen Position und setzen eines Markes
			   navigator.geolocation.getCurrentPosition(function(position){
			   meineLongitude = position.coords.longitude;
			   meineLatitude = position.coords.latitude;			   
			   var Latlng_position = new google.maps.LatLng(meineLatitude, meineLongitude); // Schreibt aktuelle Position in Koordinaten-Variable für die aktuellen Position
			   var mapOptions = {													// Definition der Anzeige-Optionen der Google-Maps karte
					zoom: 17,													// Zoom-Stufe der Karte
					center: Latlng_position,										// Definition des Mittelspunktes nach dem die Karte ausgerichtet wird
					mapTypeId: google.maps.MapTypeId.ROADMAP					// Definiert den Anzeige-Typ der Goole Maps Karte
					zoomControl: true,
					zoomControlOptions: {
						style: google.maps.ZoomControlStyle.SMALL,
						position: google.maps.ControlPosition.LEFT_BOTTOM},
			   };
			   
			   // Google Map erzeugen
			   var map = new google.maps.Map(document.getElementById('karte'), mapOptions);
			   // Marker für aktuellen Standort einfügen
			   var marker = new google.maps.Marker({
				position: Latlng_position,
				map: map,
				title: 'Mein Standort',
				icon: '../bilder/position.png'
			   });
			   
			   // Auslesen der JSON-Datei und zeichnen von Google-Maps-Markern
				$.getJSON('../daten/gebaeude.json', function(json) {
					$.each(json, function(bau,data) {
						var latLng = new google.maps.LatLng(data.position.latitude, data.position.longitude); 
						// Creating a marker and putting it on the map
						var marker = new google.maps.Marker({
							position: latLng,
							map: map,
							title: data.name,
							icon: '../bilder/' + bau + '.png'
						});
					});
				});
			   },
			   // Ausgabe einer Fehlermeldung sowie änderung der Anzeige-Optionen, wenn die Koordinaten der aktuellen Position nicht bestimmt werden konnten
			   function(){window.alert('Deine Position konnte nicht ermittelt werden! :-(');
			   var Latlng_center = new google.maps.LatLng(49.013625,8.390161);	// Erstellt Variable mit der Position nach der die Karte zentriert werden soll
			   var mapOptions = {													// Definition der Anzeige-Optionen der Google-Maps karte
					zoom: 15,													// Zoom-Stufe der Karte
					center: Latlng_center,										// Definition des Mittelspunktes nach dem die Karte ausgerichtet wird
					mapTypeId: google.maps.MapTypeId.ROADMAP					// Definiert den Anzeige-Typ der Goole Maps Karte
			 };
			 // Google Map erzeugen
			 var map = new google.maps.Map(document.getElementById('karte'), mapOptions);
			 
			 // Auslesen der JSON-Datei und zeichnen von Google-Maps-Markern
				$.getJSON('../daten/gebaeude.json', function(json) {
					$.each(json, function(bau,data) {
						var latLng = new google.maps.LatLng(data.position.latitude, data.position.longitude); 
						// Creating a marker and putting it on the map
						var marker = new google.maps.Marker({
							position: latLng,
							map: map,
							title: data.name,
							icon: '../bilder/' + bau + '.png'
						});
					});
				});
			  }
			 );
			  
			
			 //Umschaltung der Toolbar
			 $('nav a').on('click',function(){
				$('section, nav a').removeClass('aktiv');
				$(this).addClass('aktiv');
				$($(this).attr('href')).addClass('aktiv');
				return false;
			 });
			
			 //Beim öffnen der Seite der Karte die Klasse aktiv zuweisen
			 $('#karte').addClass('aktiv');
			});
			});
			</script>	
					
		<!-- jQuery mobile -->
<!-- 		<script type="text/javascript" src="../js/jquery.mobile-1.3.2.min.js"></script> -->
		
	</head>

	<!-- ######################### BODY ######################### -->
	<body>
		<!-- ######################### HEADER ######################### -->
		<div id="title_bar">
		 <table border="0" cellpadding="0" width="100%">
		  <tr>
		   <td align="center" width="15%">
			<a href="../main.html"><img src="../bilder/button_home.png" height="35"></a>
		   </td>
		   		   
		   <td align="center" width="*">
		    <h1>Navigation</h1>
		   </td>
		   		   
		   <td  align="center" width="15%">
			<a href="../main_topics/navigation.html"><img src="../bilder/button_navi.png" height="35"></a>
		   </td>			
			
		  </tr>	
		 </table>
		</div>
		
			<!-- ######################### Karte ######################### -->
		    <section id="karte">
			</section>
		
			<!-- ######################### QR-Code ######################### -->		
			<section id="qr-code">
				<h2>Wo bin ich?</h2>
				<ul>
					Hier sollte ein QR-Code Reader sein...<!-- Wird dynamisch befüllt -->
				</ul>
			</section>
		
			<!-- ######################### Gebäude Übersicht ######################### -->
			<section id="uebersicht">
				<h2>Gebäudeplan F / Li</h2>
				<ul>
					Hier kommt eine Gebäudeplan hin
				</ul>
			</section>
					

			<!-- ######################### Toolbar ######################### -->
			<nav>
				<li><a class="karte" href="#karte" data-transition="slide" data-ajax="false">Karte</a></li>
				<li><a class="qr-code" href="#qr-code" data-transition="slide" data-ajax="false">Wo bin ich?</a></li>
				<li><a class="uebersicht" href="#uebersicht" data-transition="slide" data-ajax="false">Gebäudeplan</a></li>	
			</nav>
	</body>
</html>